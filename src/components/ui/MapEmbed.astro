---
interface Props {
  query: string; // e.g. "حي الياسمين الرياض"
}

const { query } = Astro.props;
// Use strict URI encoding for Arabic characters
const encodedQuery = encodeURIComponent(query);
// Use the output=embed format which is more lenient
const mapUrl = `https://maps.google.com/maps?q=${encodedQuery}&t=&z=13&ie=UTF8&iwloc=&output=embed`;
---

<div class="w-full h-[400px] rounded-xl overflow-hidden shadow-lg border-2 border-slate-100 relative bg-slate-100">
  <iframe
    width="100%"
    height="100%"
    id="gmap_canvas"
    src={mapUrl}
    frameborder="0"
    scrolling="no"
    marginheight="0"
    marginwidth="0"
    loading="lazy"
    title={`Map of ${query}`}
  ></iframe>
  <!-- Overlay to prevent mouse trap on scroll -->
  <div class="absolute inset-0 pointer-events-none border-4 border-emerald-500/20 rounded-xl"></div>
</div>
